{% extends 'navbar.html' %}

    {% block content %}
        <div id='results' class='container'>
            {% for entry in results %}
                <a class='flexbox-container items' href='/recipe_page?id={{entry.id}}'>
                    <h2>{{entry.name}}</h2>
                    <img src="{{entry.image}}" alt="{{entry.name}}" height="200" width="300">
                </a>
            {% else %}
                <p id="no-results">No results found for query "{{query}}"</p>
            {% endfor %}
        </div>

    {% endblock %}

    {% block banner %}
    <!--banner pic-->
    <div class="banner">
        <img class="banner-image" src="../static/images/fantasykitchen-1.jpg">
    </div>
    <!--banner pic-->
    {% endblock %}

    {% block pagination %}
        <div id='pagination' class='flexbox-container'>
            {% if curr_page == 1 %}
            <div>
                <button disabled>First</button>
            </div>
            <div>
                <button disabled>Previous</button>
            </div>
            {% else %}
            <div>
                <a href="/{% if advanced %}advanced_search{% endif %}?search={{query}}&page=1{% if in_query != None %}&included_ingredients={{in_query}}{% endif %}{% if ex_query != None %}&excluded_ingredients={{ex_query}}{% endif %}{% for d in diets %}&diets={{d}}{% endfor %}{% for c in cautions %}&cautions={{c}}{% endfor %}{% if ranking != '' %}&ranking_method={ranking}{% endif %}"><button>First</button></a>
            </div>
            <div>
                <a href="/{% if advanced %}advanced_search{% endif %}?search={{query}}&page={{curr_page - 1}}{% if in_query != None %}&included_ingredients={{in_query}}{% endif %}{% if ex_query != None %}&excluded_ingredients={{ex_query}}{% endif %}{% for d in diets %}&diets={{d}}{% endfor %}{% for c in cautions %}&cautions={{c}}{% endfor %}{% if ranking != '' %}&ranking_method={ranking}{% endif %}"><button>Previous</button></a>
            </div>
            {% endif %}
            {% if curr_page == 1 %}
            <div class="current-page">
                <button disabled>{{1}}</button>
            </div>
            {% if total_pages <= 5 %}
                {% for n in range(2, total_pages + 1) %}
                <div>
                    <a href="/{% if advanced %}advanced_search{% endif %}?search={{query}}&page={{n}}{% if in_query != None %}&included_ingredients={{in_query}}{% endif %}{% if ex_query != None %}&excluded_ingredients={{ex_query}}{% endif %}{% for d in diets %}&diets={{d}}{% endfor %}{% for c in cautions %}&cautions={{c}}{% endfor %}{% if ranking != '' %}&ranking_method={{ranking}}{% endif %}"><button>{{n}}</button></a>
                </div>
                {% endfor %}
            {% else %}
                {% for n in range(2, 6) %}
                <div>
                    <a href="/{% if advanced %}advanced_search{% endif %}?search={{query}}&page={{n}}{% if in_query != None %}&included_ingredients={{in_query}}{% endif %}{% if ex_query != None %}&excluded_ingredients={{ex_query}}{% endif %}{% for d in diets %}&diets={{d}}{% endfor %}{% for c in cautions %}&cautions={{c}}{% endfor %}{% if ranking != '' %}&ranking_method={{ranking}}{% endif %}"><button>{{n}}</button></a>
                </div>
                {% endfor %}
            {% endif %}
                {% if total_pages > 5 %}
                <div>
                    <span>...</span>
                </div>
                {% endif %}
            {% elif curr_page == 2 %}
            <div>
                <a href="/{% if advanced %}advanced_search{% endif %}?search={{query}}&page={{1}}{% if in_query != None %}&included_ingredients={{in_query}}{% endif %}{% if ex_query != None %}&excluded_ingredients={{ex_query}}{% endif %}{% for d in diets %}&diets={{d}}{% endfor %}{% for c in cautions %}&cautions={{c}}{% endfor %}{% if ranking != '' %}&ranking_method={ranking}{% endif %}"><button>{{1}}</button></a>
            </div>
            <div class="current-page">
                <button disabled>{{2}}</button>
            </div>
                {% if total_pages <= 5 %}
                    {% for n in range(3, total_pages + 1) %}
                    <div>
                        <a href="/{% if advanced %}advanced_search{% endif %}?search={{query}}&page={{n}}{% if in_query != None %}&included_ingredients={{in_query}}{% endif %}{% if ex_query != None %}&excluded_ingredients={{ex_query}}{% endif %}{% for d in diets %}&diets={{d}}{% endfor %}{% for c in cautions %}&cautions={{c}}{% endfor %}{% if ranking != '' %}&ranking_method={ranking}{% endif %}"><button>{{n}}</button></a>
                    </div>
                    {% endfor %}
                {% else %}
                    {% for n in range(3, 6) %}
                    <div>
                        <a href="/{% if advanced %}advanced_search{% endif %}?search={{query}}&page={{n}}{% if in_query != None %}&included_ingredients={{in_query}}{% endif %}{% if ex_query != None %}&excluded_ingredients={{ex_query}}{% endif %}{% for d in diets %}&diets={{d}}{% endfor %}{% for c in cautions %}&cautions={{c}}{% endfor %}{% if ranking != '' %}&ranking_method={ranking}{% endif %}"><button>{{n}}</button></a>
                    </div>
                    {% endfor %}
                {% endif %}
                {% if total_pages > 5 %}
                    <div>
                        <span>...</span>
                    </div>
                {% endif %}
            {% elif curr_page == total_pages - 1 %}
                {% if total_pages > 5 %}
                <div>
                    <span>...</span>
                </div>
                {% endif %}
                {% if total_pages < 5 %}
                    {% for n in range(1, total_pages - 1) %}
                        <div>
                            <a href="/{% if advanced %}advanced_search{% endif %}?search={{query}}&page={{n}}{% if in_query != None %}&included_ingredients={{in_query}}{% endif %}{% if ex_query != None %}&excluded_ingredients={{ex_query}}{% endif %}{% for d in diets %}&diets={{d}}{% endfor %}{% for c in cautions %}&cautions={{c}}{% endfor %}{% if ranking != '' %}&ranking_method={ranking}{% endif %}"><button>{{n}}</button></a>
                        </div>
                    {% endfor %}
                {% else %}
                    {% for n in range(total_pages - 4, total_pages - 1) %}
                        <div>
                            <a href="/{% if advanced %}advanced_search{% endif %}?search={{query}}&page={{n}}{% if in_query != None %}&included_ingredients={{in_query}}{% endif %}{% if ex_query != None %}&excluded_ingredients={{ex_query}}{% endif %}{% for d in diets %}&diets={{d}}{% endfor %}{% for c in cautions %}&cautions={{c}}{% endfor %}{% if ranking != '' %}&ranking_method={ranking}{% endif %}"><button>{{n}}</button></a>
                        </div>
                    {% endfor %}
                {% endif %}
                <div class="current-page">
                    <button disabled>{{total_pages - 1}}</button>
                </div>
                <div>
                    <a href="/{% if advanced %}advanced_search{% endif %}?search={{query}}&page={{total_pages}}{% if in_query != None %}&included_ingredients={{in_query}}{% endif %}{% if ex_query != None %}&excluded_ingredients={{ex_query}}{% endif %}{% for d in diets %}&diets={{d}}{% endfor %}{% for c in cautions %}&cautions={{c}}{% endfor %}{% if ranking != '' %}&ranking_method={ranking}{% endif %}"><button>{{total_pages}}</button></a>
                </div>
            {% elif curr_page == total_pages %}
                {% if total_pages > 5 %}
                <div>
                    <span>...</span>
                </div>
                {% endif %}
                {% if total_pages < 5 %}
                    {% for n in range(1, total_pages) %}
                    <div>
                        <a href="/{% if advanced %}advanced_search{% endif %}?search={{query}}&page={{n}}{% if in_query != None %}&included_ingredients={{in_query}}{% endif %}{% if ex_query != None %}&excluded_ingredients={{ex_query}}{% endif %}{% for d in diets %}&diets={{d}}{% endfor %}{% for c in cautions %}&cautions={{c}}{% endfor %}{% if ranking != '' %}&ranking_method={ranking}{% endif %}"><button>{{n}}</button></a>
                    </div>
                    {% endfor %}
                {% else %}
                    {% for n in range(total_pages - 4, total_pages) %}
                    <div>
                        <a href="/{% if advanced %}advanced_search{% endif %}?search={{query}}&page={{n}}{% if in_query != None %}&included_ingredients={{in_query}}{% endif %}{% if ex_query != None %}&excluded_ingredients={{ex_query}}{% endif %}{% for d in diets %}&diets={{d}}{% endfor %}{% for c in cautions %}&cautions={{c}}{% endfor %}{% if ranking != '' %}&ranking_method={ranking}{% endif %}"><button>{{n}}</button></a>
                    </div>
                    {% endfor %}
                {% endif %}
            <div class="current-page">
                <button disabled>{{total_pages}}</button>
            </div>
            {% else %}
                {% if curr_page - 2 != 1 %}
                <div>
                    <span>...</span>
                </div>
                {% endif %}
            <div>
                <a href="/{% if advanced %}advanced_search{% endif %}?search={{query}}&page={{curr_page - 2}}{% if in_query != None %}&included_ingredients={{in_query}}{% endif %}{% if ex_query != None %}&excluded_ingredients={{ex_query}}{% endif %}{% for d in diets %}&diets={{d}}{% endfor %}{% for c in cautions %}&cautions={{c}}{% endfor %}{% if ranking != '' %}&ranking_method={ranking}{% endif %}"><button>{{curr_page - 2}}</button></a>
            </div>
            <div>
                <a href="/{% if advanced %}advanced_search{% endif %}?search={{query}}&page={{curr_page - 1}}{% if in_query != None %}&included_ingredients={{in_query}}{% endif %}{% if ex_query != None %}&excluded_ingredients={{ex_query}}{% endif %}{% for d in diets %}&diets={{d}}{% endfor %}{% for c in cautions %}&cautions={{c}}{% endfor %}{% if ranking != '' %}&ranking_method={ranking}{% endif %}"><button>{{curr_page - 1}}</button></a>
            </div>
            <div class="current-page">
                <button disabled>{{curr_page}}</button>
            </div>
            <div>
                <a href="/{% if advanced %}advanced_search{% endif %}?search={{query}}&page={{curr_page + 1}}{% if in_query != None %}&included_ingredients={{in_query}}{% endif %}{% if ex_query != None %}&excluded_ingredients={{ex_query}}{% endif %}{% for d in diets %}&diets={{d}}{% endfor %}{% for c in cautions %}&cautions={{c}}{% endfor %}{% if ranking != '' %}&ranking_method={ranking}{% endif %}"><button>{{curr_page + 1}}</button></a>
            </div>
            <div>
                <a href="/{% if advanced %}advanced_search{% endif %}?search={{query}}&page={{curr_page + 2}}{% if in_query != None %}&included_ingredients={{in_query}}{% endif %}{% if ex_query != None %}&excluded_ingredients={{ex_query}}{% endif %}{% for d in diets %}&diets={{d}}{% endfor %}{% for c in cautions %}&cautions={{c}}{% endfor %}{% if ranking != '' %}&ranking_method={ranking}{% endif %}"><button>{{curr_page + 2}}</button></a>
            </div>
                {% if total_pages > curr_page + 2 %}
                <div>
                    <span>...</span>
                </div>
                {% endif %}
                
            {% endif %}

            {% if curr_page == total_pages %}
            <div>
                <button disabled>Next</button>
            </div>
            <div>
                <button disabled>Last</button>
            </div>
            {% else %}
            <div>
                <a href="/{% if advanced %}advanced_search{% endif %}?search={{query}}&page={{curr_page + 1}}{% if in_query != None %}&included_ingredients={{in_query}}{% endif %}{% if ex_query != None %}&excluded_ingredients={{ex_query}}{% endif %}{% for d in diets %}&diets={{d}}{% endfor %}{% for c in cautions %}&cautions={{c}}{% endfor %}{% if ranking != '' %}&ranking_method={ranking}{% endif %}"><button>Next</button></a>
            </div>
            <div>
                <a href="/{% if advanced %}advanced_search{% endif %}?search={{query}}&page={{total_pages}}{% if in_query != None %}&included_ingredients={{in_query}}{% endif %}{% if ex_query != None %}&excluded_ingredients={{ex_query}}{% endif %}{% for d in diets %}&diets={{d}}{% endfor %}{% for c in cautions %}&cautions={{c}}{% endfor %}{% if ranking != '' %}&ranking_method={ranking}{% endif %}"><button>Last</button></a>
            </div>
            {% endif %} 
        </div>
    {% endblock %}