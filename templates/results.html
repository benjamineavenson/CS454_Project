{% extends 'navbar.html' %}

    {% block content %}
        <div id='results' class='container'>
            {% for entry in results %}
                <a class='flexbox-container items' href='/recipe_page?id={{entry.id}}'>
                    <h2>{{entry.name}}</h2>
                    <img src="{{entry.image}}" alt="{{entry.name}}" height="200" width="300">
                </a>
            {% endfor %}
        </div>

    {% endblock %}

    {% block banner %}
    <!--banner pic-->
    <div class="banner">
        <img class="banner-image" src="../static/images/fantasykitchen-1.jpg">
    </div>
    <!--banner pic-->
    {% endblock %}

    {% block pagination %}
        <div id='pagination' class='flexbox-container'>
            {% if curr_page == 1 %}
            <div>
                <button disabled>First</button>
            </div>
            <div>
                <button disabled>Previous</button>
            </div>
            {% else %}
            <div>
                <a href="/?search={{query}}&page=1"><button>First</button></a>
            </div>
            <div>
                <a href="/?search={{query}}&page={{curr_page - 1}}"><button>Previous</button></a>
            </div>
            {% endif %}
            {% if curr_page == 1 %}
            <div class="current-page">
                <button disabled>{{1}}</button>
            </div>
            <div>
                <a href="/?search={{query}}&page={{2}}"><button>{{2}}</button></a>
            </div>
            <div>
                <a href="/?search={{query}}&page={{3}}"><button>{{3}}</button></a>
            </div>
            <div>
                <a href="/?search={{query}}&page={{4}}"><button>{{4}}</button></a>
            </div>
            <div>
                <a href="/?search={{query}}&page={{5}}"><button>{{5}}</button></a>
            </div>
                {% if total_pages != 5 %}
                <div>
                    <span>...</span>
                </div>
                {% endif %}
            {% elif curr_page == 2 %}
            <div>
                <a href="/?search={{query}}&page={{1}}"><button>{{1}}</button></a>
            </div>
            <div class="current-page">
                <button disabled>{{2}}</button>
            </div>
            <div>
                <a href="/?search={{query}}&page={{3}}"><button>{{3}}</button></a>
            </div>
            <div>
                <a href="/?search={{query}}&page={{4}}"><button>{{4}}</button></a>
            </div>
            <div>
                <a href="/?search={{query}}&page={{5}}"><button>{{5}}</button></a>
            </div>
                {% if total_pages != 5 %}
                <div>
                    <span>...</span>
                </div>
                {% endif %}
            {% elif curr_page == total_pages - 1 %}
                {% if total_pages > 5 %}
                <div>
                    <span>...</span>
                </div>
                {% endif %}
            <div>
                <a href="/?search={{query}}&page={{total_pages - 4}}"><button>{{total_pages - 4}}</button></a>
            </div>
            <div>
                <a href="/?search={{query}}&page={{total_pages - 3}}"><button>{{total_pages - 3}}</button></a>
            </div>
            <div>
                <a href="/?search={{query}}&page={{total_pages - 2}}"><button>{{total_pages - 2}}</button></a>
            </div>
            <div class="current-page">
                <button disabled>{{total_pages - 1}}</button>
            </div>
            <div>
                <a href="/?search={{query}}&page={{total_pages}}"><button>{{total_pages}}</button></a>
            </div>
            {% elif curr_page == total_pages %}
                {% if total_pages > 5 %}
                <div>
                    <span>...</span>
                </div>
                {% endif %}
            <div>
                <a href="/?search={{query}}&page={{total_pages - 4}}"><button>{{total_pages - 4}}</button></a>
            </div>
            <div>
                <a href="/?search={{query}}&page={{total_pages - 3}}"><button>{{total_pages - 3}}</button></a>
            </div>
            <div>
                <a href="/?search={{query}}&page={{total_pages - 2}}"><button>{{total_pages - 2}}</button></a>
            </div>
            <div>
                <a href="/?search={{query}}&page={{total_pages - 1}}"><button>{{total_pages - 1}}</button></a>
            </div>
            <div class="current-page">
                <button disabled>{{total_pages}}</button>
            </div>
            {% else %}
                {% if curr_page - 2 != 1 %}
                <div>
                    <span>...</span>
                </div>
                {% endif %}
            <div>
                <a href="/?search={{query}}&page={{curr_page - 2}}"><button>{{curr_page - 2}}</button></a>
            </div>
            <div>
                <a href="/?search={{query}}&page={{curr_page - 1}}"><button>{{curr_page - 1}}</button></a>
            </div>
            <div class="current-page">
                <button disabled>{{curr_page}}</button>
            </div>
            <div>
                <a href="/?search={{query}}&page={{curr_page + 1}}"><button>{{curr_page + 1}}</button></a>
            </div>
            <div>
                <a href="/?search={{query}}&page={{curr_page + 2}}"><button>{{curr_page + 2}}</button></a>
            </div>
                {% if total_pages > curr_page + 2 %}
                <div>
                    <span>...</span>
                </div>
                {% endif %}
                
            {% endif %}

            {% if curr_page == total_pages %}
            <div>
                <button disabled>Next</button>
            </div>
            <div>
                <button disabled>Last</button>
            </div>
            {% else %}
            <div>
                <a href="/?search={{query}}&page={{curr_page + 1}}"><button>Next</button></a>
            </div>
            <div>
                <a href="/?search={{query}}&page={{total_pages}}"><button>Last</button></a>
            </div>
            {% endif %} 
        </div>
    {% endblock %}